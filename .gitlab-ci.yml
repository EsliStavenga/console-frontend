cache:
    paths:
        - node_modules/

before_script:
    - npm install @angular/cli
    - npm install

testing:
    stage: test
    image: trion/ng-cli-karma
    allow_failure: false
    environment: test
    script:
        - apt-get update
        - apt-get -y install firefox
        - ng test --watch=false --code-coverage
    coverage: '/Lines \W+: (\d+\.\d+)%.*/'
    artifacts:
        paths:
            - coverage/
    only:
        - merge_requests
        - master
        - develop
        - staging
        - feature/CI-CD

